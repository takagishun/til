# 12 月 25 日

## 暗号技術

暗号化は秘匿性はあるがが安全性がない。  
MAC や署名は安全性はあるが秘匿性がない。  
認証月暗号(AEAD)は秘匿性もあり安全性もある。TLS1.3 では必須となっている。

# 12 月 24 日

## 暗号技術

鍵共有を利用した共通鍵暗号や公開鍵暗号は盗聴するだけの攻撃者には強いが、改竄に弱い(中間者攻撃 MITM)。  
一度正しく鍵を共有できた場合はそれ以降は安全に通信できるが、鍵を共有するタイミングで改竄されてしまったら、それ以降の通信された暗号文は攻撃者は容易に解読できてしまう。 その対処法として認証局というものがある。

# 12 月 23 日

## 暗号技術

前回までは共通鍵の仕組みについて学んだが、鍵をどうやって安全に共有するんだろうと疑問だったが、どうやら鍵の共有の方法としてべき乗の性質を使うらしい。排他的論理和といい数学の基本?みたいなことが暗号技術でしっかり使われていて面白いなと思う。

- (g^a)^b = g^ab = g^ba = (g^b)^a
- ab が大きいと g^ab が大きくなりすぎるので、予め決めた n で割った余りを考える
- A = g^a mod n, B = g^b mod n, A^b ≡ B^a (mod n)

↑ がこの関係式が鍵共有のポイント ↓ べき乗の性質を利用した鍵共有方法

1. アリスとボブで g と n を固定する。g と n は公開されても良い値
2. アリスは秘密値 a を決めて、A = g^a mod n をボブに渡す
3. ボブは秘密値 b を決めて、B = g^b mod n をアリスに渡す
4. アリスはボブからもらった B から s = B^a mod n を求める
5. ボブはアリスからもらった A から s' = A^b mod n を求める
6. s = s' = g^ab mod n になり同じ値を共有できる(共通暗号の秘密鍵)

この共有の仕方を DH(ディフィー・ヘルマン)鍵共有という

a を決めて g^a mod n の計算は簡単だが、g と n がわかった状態でも g^a mod n となる a を求めるのは困難 <= 1 方向性関数
n が 600 桁以上の素数である条件を満たしていたら、現在に存在するどんなスーパーコンピューターでも解けないと予測されている

# 12 月 22 日

- **シード:** 一定のビット長がある値。ある程度固定値。
- **ナンス:** 暗号化するたびに毎回違う値。

ストリーム暗号はシードとナンスを擬似乱数生成器を通して乱数を生成し、平文と乱数で排他的論理和で暗号化する仕組み。 暗号文を送る際は乱数生成に使ったナンスを一緒に送り、復号する際はシードとナンスを使う。
以上の仕組みから、共有すべき秘密鍵はシードだけでよくなる。

# 12 月 21 日

## 暗号技術

共通鍵暗号に求められる安全性は強秘匿性。強秘匿性とは暗号文から下の平文の情報を一部でも推測するのが困難な性質。  
共通鍵暗号はブロック暗号とストリーム暗号に分類される。  
暗号では、排他的論理和という演算が重要。排他的論理和は２個(a,b)の 1 ビットを入力に対して 1 ビットを出力する、  
a,b の片方のみ 1 の時が 1、それ以外は 0 を出力する。  
a に対して b の排他的論理和を 2 回行うと a に戻る  
(a^b)^b = a^(b^b) = a^0 = a  
この性質が共通鍵暗号。この場合 b を秘密鍵の役割で、(a^b)が暗号文、(a^b)^b が復号に当たる

真の乱数: どんな値の値になるか予想できない数字の列の値。真の乱数を作るのは難しい。コンピュータで作るにはある瞬間のメモリ・ディスク・キーボード状態などの情報から乱数を作る。エントロピー(情報の複雑度。コンピューター起動は少ない)に応じて乱数を生成できるサイズが決まる。

擬似乱数: 真の乱数を作るにはエントロピー増大を待つ必要があるためコストがかかる。擬似乱数はアルゴリズムを利用して、シードと呼ばれる値から乱数にみえるものを効率的に作成する。シードを真の乱数で作成し、それを利用して擬似乱数を作成するとより効率的。

ワンタイムパッド: 暗号化したいデータと同じサイズかつ一度限りの秘密鍵で暗号化する。秘密鍵として真の乱数を使うと絶対に解読できない。暗号化したいデータと同じサイズかつ一度限りしか利用できないので使い道があまりない。

ワンタイムパッドの問題点を解決したのが、ストリーム暗号。ChaCha20 など

# 12 月 20 日

## 認証

- 生体認証技術は、生体情報からその人固有の特徴量を取り出し、予め登録された値に一致するかを照合する技術。
  - 特徴量は容易に複製されないこと前提にしている
  - 世界人口の 100 億種類を識別できれば問題ない
- 同様のことをコンピューターで行うには、様々なデータにそれぞれ固有の識別子を対応させなければならない
  - その膨大な種類のデータに対して相違なる識別子を簡単に割り当てる仕組みがハッシュ関数
- ハッシュ関数
  - データから予め決められた範囲内の値を計算する関数
  - プログラム言語における連想配列やデータベースの検索などでも使われる
  - 暗号で使うハッシュ関数は暗号学的ハッシュ関数と表記される
  - データの正しさの保証や改竄検知を使うため、次の 3 つの性質が求められる
    - 出力サイズが一定
      - SHA-256 というハッシュ関数は、入力のサイズによらず出力されるハッシュ値は 256 ビット
      - 基本的にハッシュ値のサイズより大きなデータはデータが欠損しているので、ハッシュ値から元のデータを復元できない
      - そのため暗号化ではない
    - 一方向性
      - データのハッシュ値が与えられた時に、元データを見つけるのが難しい性質
      - ハッシュ値だけを与えられても元のデータの情報は得られない
    - ## 衝突困難性

# 12 月 17 日

## 暗号技術

1970 年代~の学問としての暗号を現代暗号、それ以前を古典暗号と呼ぶ

- シフト暗号(シーザー暗号)
  - 二人で数字を決めておき、その数字だけ文字(a-z)をずらして暗号文を作る方法
  - この場合何文字ずらすかが秘密鍵となる
- 換字式暗号
  - a-z のでたらめな並び順を作る。それを順に並んだ a-z に対応させ、それに従って暗号化する
  - 換字表が秘密鍵

どちらの方法も簡単に解読される。換字式暗号の秘密鍵は 4 と 10 の 26 乗通りあるが、平文が英語の場合は、出現頻度が e,a,t が多いとか q の後ろには u がくることが多いなどの統計情報がありため解読がし易くなってしまう。
暗号文に偏りや統計情報を残さない暗号でなければならない。現在では偏りがないように設計されている。

- 符号化
  - 文章をコンピューターで扱える形にすること。
  - 例えば、文字を ASCII コードや UTF-8 などに変換すること
  - 変換するための換字表があるが、皆に知らせているし、秘密にしているものではないので、暗号化ではなく符号化
  - この換字表は皆に知られている秘密鍵みたいなもの

# 12 月 16 日

## 暗号技術

より重要な情報を扱うには、情報セキュリティの三要素に加えて以下の用件が必要

- 真正性
  - ユーザーやシステムが偽物ではないこと。パスワードや生体認証で本物であることを確認する必要がる。
- 責任追跡性
  - システムが攻撃されたり、予期しない挙動になった時に原因を追跡できること。ロギングなど。
- 否認防止
  - 取引や操作をなかったことにできないようにすること。
- 信頼性
  - システムが不具合なく正確に動作していること。

**暗号技術は、機密性、安全性、真正性、否認防止を満たすために利用される。**

- 暗号化
  - 情報を第三者が見ても分からない形に変換すること。暗号化には暗号鍵が必要
- 復号
  - 暗号文を平文に戻すこと。復号鍵が必要。復号鍵は知られてはまずいので秘密鍵とも言われる
- 解読
  - 正規の復号手順を踏まずに平文の情報を取得すること

情報を暗号化して通信すると「機密性」が保たれる。 暗号化の手順が公開されいて、広く使われている方式を利用する。そのような暗号方式は研究者によって安全性を検証されている。システムで使うためにはよく知られている暗号ライブラリを使うと良い

# 12 月 15 日

## 暗号技術

### 情報セキュリティの三要素

- 機密性
  - 許可されていない人が情報にアクセスできないこと。機密性をまもるためには自分と相手の通信を攻撃者からまもる必要がある。通信内容の暗号化、データ保存時の暗号化、アクセス制御の認証が必要。
- 安全性
  - 情報を改竄や削除されずに正確に安全に残っていること。情報が改竄されてないか検証するためには、メッセージ認証符号や署名と呼ばれる技術が必要。
- 可用性
  - 認可された人が望んだ時に情報にアクセスできること
